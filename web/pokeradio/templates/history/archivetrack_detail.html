{% extends 'base.html' %}
{% load staticfiles %}

{% block scripts %}
    <script src="{% static 'js/lib/d3.js' %}"></script>
    <script src="{% static 'js/lib/jquery.2.1.3.js' %}"></script>

    <script src="{% static 'js/sparkline.js' %}"></script>
    <script>
        var data = JSON.parse('{{ time_series|safe }}');
    </script>
{% endblock %}

{% block head %}
    <link rel="stylesheet" href="{% static 'css/sparkline.css' %}">
{% endblock %}

{% block container %}
<header class="Header--page">
    <h1>{{ object.name }} - {{ object.artist.name }}</h1>
    <a title="Open in Spotify locally" class="spotify-link js-spotifyLink js-spotifyLink--track" href="{{ object.spotify_href }}">Open in Spotify</a>
</header>

<div class="row">
    <div class="col-sm-4">
        <h2>First Play</h2>
        <p>By: {{ first_play.user.get_full_name }}</p>
        <p>On: {{ first_play.created }}</p>
        <p>Adoption by other players: {{ user_plays.count }}</p>
    </div>
    <div class="col-sm-4">
        <h2>Votes</h2>
        <p>Score: {{ score }} over {{ object.point_set.all.count }} votes</p>
        <p>Total plays: {{ plays.count }}</p>
        <p>Average score: {{ ave_score|floatformat:2 }}</p>
        <p>Position: TBC</p>
    </div>
    <div class="col-sm-4">
        <img src="{{ object.artwork_url }}" alt="Artwork" />
    </div>
</div>
<div class="row">
    <div class="col-sm-12">
        <h2>Plays over time</h2>
        <div class="js-report-sparkline"></div>
    </div>
</div>
{% endblock %}

{% block footer_scripts %}
{% endblock %}

